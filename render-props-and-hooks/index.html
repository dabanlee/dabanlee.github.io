<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        
            React Render Props and Hooks - å¤§æ¿æ —æƒ³å†™ç‚¹ä¸œè¥¿
        
    </title>
    <meta name="keywords" content>
    <meta name="description" content>
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="/dist/css/github-gist.css">
    <link rel="stylesheet" href="/dist/css/app.css">
</head>


<body data-page="article">

</body></html>
<header class="Header">
    <nav class="Nav">
        <div class="container">
            <div class="Logo">
                <a href="https://justclear.github.io">
                    <img src="/images/logo.jpg" alt="å¤§æ¿æ —æƒ³å†™ç‚¹ä¸œè¥¿">
                </a>
            </div>
            <ul class="menu">
                
                <li><a href="/">HOME</a></li>
                
                <li><a href="/idea">IDEA</a></li>
                
                <li><a href="https://unsplash.com/@dabanli">PHOTOGRAPHY</a></li>
                
                <li><a href="/about/">ABOUT</a></li>
                
                <li><a href="https://github.com/justclear">GITHUB</a></li>
                
            </ul>
            <div class="icon-menu js-icon-menu"></div>
        </div>
    </nav>
</header>
<ul class="menu-mobile js-menu-mobile">
    
    <li><a href="/">HOME</a></li>
    
    <li><a href="/idea">IDEA</a></li>
    
    <li><a href="https://unsplash.com/@dabanli">PHOTOGRAPHY</a></li>
    
    <li><a href="/about/">ABOUT</a></li>
    
    <li><a href="https://github.com/justclear">GITHUB</a></li>
    
</ul>


<div class="page-content">
    <div class="container">
        <article class="article">
            <header class="article-header">
                <h1 class="article-title">React Render Props and Hooks</h1>
                
            </header>
            <section class="article-content">
                 <p>æ–‡ç« ç›®å½•ï¼š</p>
<ul>
<li>ä»€ä¹ˆæ˜¯ Render Props</li>
<li>Render Props çš„åº”ç”¨</li>
<li>ä»€ä¹ˆæ˜¯ React Hooks</li>
<li>React Hooks çš„åº”ç”¨</li>
<li>æ€»ç»“</li>
</ul>
<h2 id="ä»€ä¹ˆæ˜¯-Render-Props"><a href="#ä»€ä¹ˆæ˜¯-Render-Props" class="headerlink" title="ä»€ä¹ˆæ˜¯ Render Props"></a>ä»€ä¹ˆæ˜¯ Render Props</h2><p>ç®€è€Œè¨€ä¹‹ï¼Œåªè¦ä¸€ä¸ªç»„ä»¶ä¸­æŸä¸ªå±æ€§çš„å€¼æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¯´æ”¹ç»„ä»¶ä½¿ç”¨äº† Render Props è¿™ç§æŠ€æœ¯ã€‚å¬èµ·æ¥å¥½åƒå°±é‚£ä¹ˆå›äº‹å„¿ï¼Œé‚£åˆ°åº• Render Props æœ‰å“ªäº›åº”ç”¨åœºæ™¯å‘¢ï¼Œè®©æˆ‘ä»¬è¿˜æ˜¯ä»ç®€å•çš„ä¾‹å­è®²èµ·ï¼Œå‡å¦‚æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªæ‰“æ‹›å‘¼çš„ç»„ä»¶ï¼Œä¸€å¼€å§‹å¯èƒ½ä¼šè¿™ä¹ˆå®ç°ï¼š</p>
<pre><code class="js">const Greeting = props =&gt; (
    &lt;div&gt;
        &lt;h1&gt;{props.text}&lt;/h1&gt;
    &lt;/div&gt;
);

// ç„¶åè¿™ä¹ˆä½¿ç”¨
&lt;Greeting text=&quot;Hello ğŸŒ°ï¼&quot; /&gt;</code></pre>
<p>ä½†æ˜¯å¦‚æœåœ¨æ‰“æ‹›å‘¼çš„æ—¶å€™åŒæ—¶è¿˜éœ€è¦å‘é€ä¸€ä¸ªè¡¨æƒ…å‘¢ï¼Œç„¶åå¯èƒ½ä¼šè¿™ä¹ˆå®ç°ï¼š</p>
<pre><code class="js">const Greeting = props =&gt; (
    &lt;div&gt;
        &lt;h1&gt;{props.text}&lt;/h1&gt;
        &lt;p&gt;{props.emoji}&lt;/p&gt;
    &lt;/div&gt;
);
// how to use
&lt;Greeting text=&quot;Hello ğŸŒ°ï¼&quot; emoji=&quot;ğŸ˜³&quot; /&gt;</code></pre>
<p>ç„¶åå¦‚æœè¿˜è¦åŠ ä¸Šé“¾æ¥å‘¢ï¼Œåˆè¦åœ¨ <code>Greeting</code> ç»„ä»¶çš„å†…éƒ¨å®ç°å‘é€é“¾æ¥çš„é€»è¾‘ï¼Œå¾ˆæ˜æ˜¾è¿™ç§æ–¹å¼è¿èƒŒäº†è½¯ä»¶å¼€å‘å…­å¤§åŸåˆ™ä¹‹ä¸€çš„ <strong>å¼€é—­åŸåˆ™</strong>ï¼Œå³æ¯æ¬¡ä¿®æ”¹éƒ½è¦åˆ°ç»„ä»¶å†…éƒ¨éœ€ä¿®æ”¹ã€‚</p>
<blockquote>
<p>å¼€é—­åŸåˆ™ï¼šå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‹“å±•å¼€æ”¾ã€‚</p>
</blockquote>
<p>é‚£æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥é¿å…è¿™ç§æ–¹å¼çš„ä¿®æ”¹å‘¢ï¼Œå½“ç„¶æœ‰ï¼Œä¹Ÿå°±æ˜¯æ¥ä¸‹æ¥è¦è®²çš„ <strong>Render Props</strong>ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªéå¸¸ç®€å•çš„æ±‚å’Œå‡½æ•°ï¼š</p>
<pre><code class="js">const sumOf = array =&gt; {
    const sum = array.reduce((prev, current) =&gt; {
        prev += current;
        return prev;
    }, 0);
    console.log(sum);
}</code></pre>
<p>è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½éå¸¸ç®€å•ï¼Œå¯¹æ•°ç»„æ±‚å’Œå¹¶æ‰“å°å®ƒã€‚ä½†æ˜¯å¦‚æœéœ€è¦æŠŠ <code>sum</code> é€šè¿‡ <code>alert</code> æ˜¾ç¤ºå‡ºæ¥ï¼Œæ˜¯ä¸æ˜¯åˆè¦åˆ° <code>sumOf</code> å†…éƒ¨å»ä¿®æ”¹å‘¢ï¼Œå’Œä¸Šé¢çš„ <code>Greeting</code> ç±»ä¼¼ï¼Œæ˜¯çš„ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å­˜åœ¨ç›¸åŒçš„é—®é¢˜ï¼Œå°±æ˜¯å½“éœ€æ±‚æœ‰å˜æ˜¯ï¼Œéƒ½éœ€è¦è¦å‡½æ•°å†…éƒ¨å»ä¿®æ”¹ã€‚</p>
<p>å¯¹äºç¬¬äºŒä¸ªå‡½æ•°ï¼Œä½ å¯èƒ½å¾ˆå¿«å°±èƒ½æƒ³å‡ºç”¨ <strong>å›è°ƒå‡½æ•°</strong> å»è§£å†³ï¼š</p>
<pre><code class="js">const sumOf = (array, done) =&gt; {
    const sum = array.reduce((prev, current) =&gt; {
        prev += current;
        return prev;
    }, 0);
    done(sum);
}

sumOf([1, 2, 3], sum =&gt; {
    console.log(sum);
    // or
    alert(sum);
})</code></pre>
<p>ä¼šå‘ç°å›è°ƒå‡½æ•°å¾ˆå®Œç¾çš„è§£å†³äº†ä¹‹å‰å­˜åœ¨çš„é—®é¢˜ï¼Œæ¯æ¬¡ä¿®æ”¹ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ <code>sumOf</code> å‡½æ•°çš„å›è°ƒå‡½æ•°ä¸­å»ä¿®æ”¹ï¼Œè€Œä¸éœ€è¦åˆ° <code>sumOf</code> å†…éƒ¨å»ä¿®æ”¹ã€‚</p>
<p>åè§‚ React ç»„ä»¶ <code>Greeting</code>ï¼Œè¦è§£å†³å‰é¢é‡åˆ°çš„é—®é¢˜ï¼Œå…¶å®å’Œ <code>sumOf</code> çš„å›è°ƒå‡½æ•°ä¸€æ ·ï¼š</p>
<pre><code class="js">const Greeting = props =&gt; {
    return props.render(props);
};
// how to use
&lt;Greeting
    text=&quot;Hello ğŸŒ°ï¼&quot;
    emoji=&quot;ğŸ˜³&quot;
    link=&quot;link here&quot;
    render={(props) =&gt; (
    &lt;div&gt;
        &lt;h1&gt;{props.text}&lt;/h1&gt;
        &lt;p&gt;{props.emoji}&lt;/p&gt;
        &lt;a href={props.link}&gt;&lt;/a&gt;
    &lt;/div&gt;
)}&gt;&lt;/Greeting&gt;</code></pre>
<p>ç±»æ¯”ä¹‹å‰çš„ <code>sumOf</code> æ˜¯ä¸æ˜¯éå¸¸çš„ç›¸ä¼¼ï¼Œç®€ç›´å°±æ˜¯ä¸€æ¯›ä¸€æ ·ï¼š</p>
<ul>
<li><code>sumOf</code> ä¸­é€šè¿‡æ‰§è¡Œå›è°ƒå‡½æ•° <code>done</code> å¹¶æŠŠ <code>sum</code> ä¼ å…¥å…¶ä¸­ï¼Œæ­¤æ—¶åªè¦åœ¨ <code>sumOf</code> å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­ä¼ å…¥ä¸€ä¸ªå‡½æ•°å³å¯è·å¾— <code>sum</code> çš„å€¼ï¼Œè¿›è€Œåšä¸€å†™å®šåˆ¶åŒ–çš„éœ€æ±‚</li>
<li><code>Greeting</code> ä¸­é€šè¿‡æ‰§è¡Œå›è°ƒå‡½æ•° <code>props.render</code> å¹¶æŠŠ <code>props</code> ä¼ å…¥å…¶ä¸­ï¼Œæ­¤æ—¶åªè¦åœ¨ <code>Greeting</code> ç»„ä»¶çš„ <code>render</code> å±æ€§ä¸­ä¼ å…¥ä¸€ä¸ªå‡½æ•°å³å¯è·å¾— <code>props</code> çš„å€¼å¹¶è¿”å›ä½ æ‰€éœ€è¦çš„ UI</li>
</ul>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¹¶ä¸æ˜¯åªæœ‰åœ¨ <code>render</code> å±æ€§ä¸­ä¼ å…¥å‡½æ•°æ‰èƒ½å« Render Propsï¼Œå®é™…ä¸Šä»»ä½•å±æ€§åªè¦å®ƒçš„å€¼æ˜¯å‡½æ•°ï¼Œéƒ½å¯ç§°ä¹‹ä¸º Render Propsï¼Œæ¯”å¦‚ä¸Šé¢è¿™ä¸ªä¾‹å­æŠŠ <code>render</code> å±æ€§åæ”¹æˆ <code>children</code> çš„è¯ä½¿ç”¨ä¸Šå…¶å®æ›´ä¸ºç®€ä¾¿ï¼š</p>
<pre><code class="js">const Greeting = props =&gt; {
    return props.children(props);
};
// how to use
&lt;Greeting text=&quot;Hello ğŸŒ°ï¼&quot; emoji=&quot;ğŸ˜³&quot; link=&quot;link here&quot;&gt;
{(props) =&gt; (
    &lt;div&gt;
        &lt;h1&gt;{props.text}&lt;/h1&gt;
        &lt;p&gt;{props.emoji}&lt;/p&gt;
        &lt;a href={props.link}&gt;&lt;/a&gt;
    &lt;/div&gt;
)}
&lt;/Greeting&gt;</code></pre>
<p>è¿™æ ·å°±å¯ä»¥ç›´æ¥åœ¨ <code>Greeting</code> æ ‡ç­¾å†…å†™å‡½æ•°äº†ï¼Œæ¯”èµ·ä¹‹å‰åœ¨ <code>render</code> ä¸­æ›´ä¸ºç›´è§‚ã€‚</p>
<p>æ‰€ä»¥ï¼Œ<strong>React ä¸­çš„ Render Props ä½ å¯ä»¥æŠŠå®ƒç†è§£æˆ JavaScript ä¸­çš„å›è°ƒå‡½æ•°</strong>ã€‚</p>
<h2 id="Render-Props-çš„åº”ç”¨"><a href="#Render-Props-çš„åº”ç”¨" class="headerlink" title="Render Props çš„åº”ç”¨"></a>Render Props çš„åº”ç”¨</h2><p>ä¸Šé¢ç®€å•ä»‹ç»äº†ä»€ä¹ˆæ˜¯ Render Propsï¼Œé‚£ä¹ˆåœ¨å®é™…å¼€å‘ä¸­ Render Props å…·ä½“æœ‰ä»€ä¹ˆå®é™…åº”ç”¨å‘¢ï¼Œç®€å•æ¥è®² Render Props æ‰€è§£å†³çš„é—®é¢˜å’Œ <strong>é«˜é˜¶ç»„ä»¶</strong> æ‰€è§£å†³çš„é—®é¢˜ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº† <strong>è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜</strong>ã€‚</p>
<blockquote>
<p>å¦‚æœå¯¹é«˜é˜¶ç»„ä»¶ä¸ç†Ÿæ‚‰çš„è¯ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ç¬”è€…ä¹‹å‰å†™çš„å…³äºé«˜é˜¶ç»„ä»¶çš„æ–‡ç« ï¼Œå…¬ä¼—å·åå°å›å¤ã€Œ190201ã€å³å¯ã€‚</p>
</blockquote>
<p>ç®€å•å®ç°ä¸€ä¸ªã€Œå¼€å…³ã€åŠŸèƒ½çš„ç»„ä»¶ï¼š</p>
<pre><code class="js">class Switch extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            on: props.initialState || false,
        };
    }
    toggle() {
        this.setState({
            on: !this.state.on,
        });
    }
    render() {
        return (
            &lt;div&gt;{this.props.children({
                on,
                toggle: this.toggle,
            })}&lt;/div&gt;
        );
    }
}
// how to use
const App = () =&gt; (
    &lt;Switch initialState={false}&gt;{({on, toggle}) =&gt; {
        &lt;Button onClick={toggle}&gt;Show Modal&lt;/Button&gt;
        &lt;Modal visible={on} onSure={toggle}&gt;&lt;/Modal&gt;
    }}&lt;/Switch&gt;
);</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ <strong>å¤ç”¨æ˜¾éšæ¨¡æ€å¼¹çª—é€»è¾‘</strong> çš„ç»„ä»¶ï¼Œæ¯”å¦‚è¦æ˜¾ç¤º <code>OtherModal</code> å°±ç›´æ¥æ›¿æ¢ <code>Modal</code> å°±è¡Œäº†ï¼Œè¾¾åˆ°å¤ç”¨ã€Œå¼€å…³ã€é€»è¾‘ä»£ç çš„ç›®çš„ã€‚</p>
<p>Render Props æ›´åƒæ˜¯ <strong>æ§åˆ¶åè½¬ï¼ˆIoCï¼‰</strong>ï¼Œå®ƒåªè´Ÿè´£å®šä¹‰æ¥å£æˆ–æ•°æ®å¹¶é€šè¿‡å‡½æ•°å‚æ•°ä¼ é€’ç»™ä½ ï¼Œå…·ä½“æ€ä¹ˆä½¿ç”¨è¿™äº›æ¥å£æˆ–è€…æ•°æ®å®Œå…¨å–å†³äºä½ ã€‚</p>
<blockquote>
<p><strong>å¦‚æœå¯¹æ§åˆ¶åè½¬ä¸ç†Ÿæ‚‰çš„è¯ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ç¬”è€…ä¹‹å‰å†™çš„å…³äºæ§åˆ¶åè½¬çš„æ–‡ç« ï¼Œå…¬ä¼—å·åå°å›å¤ã€Œ190311ã€å³å¯ã€‚</strong></p>
</blockquote>
<h3 id="Render-Props-VS-HOC"><a href="#Render-Props-VS-HOC" class="headerlink" title="Render Props VS HOC"></a>Render Props VS HOC</h3><p>å‰é¢æåˆ°è¿‡ Render Props æ‰€è§£å†³çš„é—®é¢˜å’Œ <strong>é«˜é˜¶ç»„ä»¶</strong> æ‰€è§£å†³çš„é—®é¢˜ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº† <strong>è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜</strong>ï¼Œé‚£å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Œè®©æˆ‘ä»¬æ¥ç®€å•åˆ†æä¸€ä¸‹å®ƒä»¬å„è‡ªçš„ç‰¹ç‚¹ï¼š</p>
<h4 id="HOC"><a href="#HOC" class="headerlink" title="HOC"></a>HOC</h4><p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>ç”±äºå¯èƒ½ä¼šå¤šæ¬¡åµŒå¥—é«˜é˜¶ç»„ä»¶ï¼Œè€Œæˆ‘ä»¬åˆå¾ˆéš¾ç¡®ä¿æ¯ä¸ªé«˜é˜¶ç»„ä»¶ä¸­çš„å±æ€§åæ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥ <strong>å±æ€§å®¹æ˜“è¢«è¦†ç›–</strong>ã€‚</li>
<li>å½“åœ¨ä½¿ç”¨é«˜é˜¶ç»„ä»¶çš„æ—¶å€™ï¼Œé«˜é˜¶ç»„ä»¶ç›¸å½“äºä¸€ä¸ª <strong>é»‘ç›’</strong>ï¼Œæˆ‘ä»¬å¿…é¡»å»çœ‹å¦‚ä½•å®ç°æ‰èƒ½å»ä½¿ç”¨å®ƒï¼š</li>
</ul>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å¯ä»¥ä½¿ç”¨ <code>compose</code> æ–¹æ³•åˆå¹¶å¤šä¸ªé«˜é˜¶ç»„ä»¶ç„¶ååœ¨ä½¿ç”¨<pre><code class="js">// ä¸è¦è¿™ä¹ˆä½¿ç”¨
const EnhancedComponent = withRouter(connect(commentSelector)(WrappedComponent))ï¼›
// å¯ä»¥ä½¿ç”¨ä¸€ä¸ª compose å‡½æ•°ç»„åˆè¿™äº›é«˜é˜¶ç»„ä»¶
// lodash, redux, ramda ç­‰ç¬¬ä¸‰æ–¹åº“éƒ½æä¾›äº†ç±»ä¼¼ `compose` åŠŸèƒ½çš„å‡½æ•°
const enhance = compose(withRouter, connect(commentSelector))ï¼›
const EnhancedComponent = enhance(WrappedComponent)ï¼›</code></pre>
</li>
<li>è°ƒç”¨æ–¹ä¾¿ï¼ˆES6 + è£…é¥°å™¨è¯­æ³•ï¼‰<pre><code class="js">@withData   
class App extends React.Component {}</code></pre>
</li>
</ul>
<h4 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h4><ul>
<li>ç¼ºç‚¹<ul>
<li>åµŒå¥—è¿‡æ·±ä¹Ÿä¼šå½¢æˆ <strong>åœ°ç‹±å›è°ƒ</strong></li>
</ul>
</li>
<li>ä¼˜ç‚¹<ul>
<li>è§£å†³äº† HOC çš„ç¼ºç‚¹</li>
</ul>
</li>
</ul>
<p>Render Props å’Œ HOC å¹¶ä¸æ˜¯éæ­¤å³å½¼çš„å…³ç³»ï¼Œæ˜ç™½å®ƒä»¬å„è‡ªçš„ä¼˜ç¼ºç‚¹ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åˆé€‚çš„åœºæ™¯ä¸‹ä½¿ç”¨é€‚åˆçš„æ–¹å¼å»å®ç°äº†ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-React-Hooks"><a href="#ä»€ä¹ˆæ˜¯-React-Hooks" class="headerlink" title="ä»€ä¹ˆæ˜¯ React Hooks"></a>ä»€ä¹ˆæ˜¯ React Hooks</h2><p>React Hooks æ˜¯ React 16.8 ç‰ˆæœ¬æ¨å‡ºçš„æ–°ç‰¹æ€§ï¼Œè®©å‡½æ•°å¼ç»„ä»¶ä¹Ÿå¯ä»¥å’Œç±»é£æ ¼ç»„ä»¶ä¸€æ ·æ‹¥æœ‰ï¼ˆç±»ä¼¼ï¼‰ã€Œç”Ÿå‘½å‘¨æœŸã€ï¼Œè¿›è€Œæ›´å¥½çš„åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å‘æŒ¥ React çš„ç‰¹æ€§ã€‚</p>
<p>React å›¢é˜Ÿæ¨å‡º Hooks çš„ç›®çš„å’Œå‰é¢æåˆ°çš„ <strong>é«˜é˜¶ç»„ä»¶</strong>ã€<strong>Render Props</strong> ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸ºäº†ä»£ç å¤ç”¨ã€‚</p>
<p>åœ¨äº†è§£ React Hooks ä¹‹å‰æˆ‘ä»¬å…ˆæ‹¿å‰é¢ Render Props çš„ <code>Switch</code> ä¾‹å­åšä¸ªå¯¹æ¯”ï¼š</p>
<pre><code class="js">class Switch extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            on: props.initialState || false,
        };
    }
    toggle() {
        this.setState({
            on: !this.state.on,
        });
    }
    render() {
        return (
            &lt;div&gt;{this.props.children({
                on,
                toggle: this.toggle,
            })}&lt;/div&gt;
        );
    }
}
// how to use
const App = () =&gt; (
    &lt;Switch initialState={false}&gt;{({on, toggle}) =&gt; {
        &lt;Button onClick={toggle}&gt;Show Modal&lt;/Button&gt;
        &lt;Modal visible={on} onSure={toggle}&gt;&lt;/Modal&gt;
    }}&lt;/Switch&gt;
);
// use hooks
const App = () =&gt; {
    const [on, setOn] = useState(false);
    return (
        &lt;div&gt;
            &lt;Button onClick={() =&gt; setOn(true)}&gt;Show Modal&lt;/Button&gt;
            &lt;Modal visible={on} onSure={() =&gt; setOn(false)}&gt;&lt;/Modal&gt;
        &lt;/div&gt;
    );
}</code></pre>
<p>é€šè¿‡å¯¹æ¯”æˆ‘ä»¬å¾ˆå®¹æ˜“å‘ç° Hooks ç‰ˆæœ¬åªç”¨äº†å‡ ä¸ªç®€å•çš„ API (<code>useState</code>, <code>setOn</code>, <code>on</code>) å°±å¹²æ‰äº† <code>Switch</code> ç±»ç»„ä»¶ 20 è¡Œä»£ç ï¼Œæå¤§çš„å‡å°‘äº†ä»£ç é‡ã€‚</p>
<p>ä»£ç é‡å‡å°‘åªæ˜¯ Hooks æ‰€å¸¦æ¥çš„å¥½å¤„ä¹‹ä¸€ï¼Œè€Œå®ƒæ›´é‡è¦çš„ç›®çš„æ˜¯ <strong>çŠ¶æ€é€»è¾‘å¤ç”¨</strong>ã€‚ï¼ˆé«˜é˜¶ç»„ä»¶å’Œ Render Props ä¹Ÿæ˜¯ä¸€æ ·ï¼ŒçŠ¶æ€é€»è¾‘å¤ç”¨å…¶å®å°±æ˜¯ä»£ç å¤ç”¨çš„æ›´å…·ä½“çš„è¯´æ³•ï¼‰</p>
<p><strong>Hooks çš„å‡ ä¸ªä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>è™½ç„¶ Hooks çš„ç›®çš„å’Œé«˜é˜¶ç»„ä»¶ã€Render Props ä¸€æ ·ï¼Œéƒ½æ˜¯ä¸ºäº†ä»£ç å¤ç”¨ï¼Œä½†æ˜¯ Hooks è¾ƒé«˜é˜¶ç»„ä»¶å’Œ Render Props æ›´ä¸ºç®€å•æ˜äº†ï¼Œä¸”ä¸ä¼šé€ æˆåµŒå¥—åœ°ç‹±ã€‚</li>
<li>èƒ½æ›´å®¹æ˜“çš„æŠŠ UI å’ŒçŠ¶æ€åˆ†ç¦»</li>
<li>ä¸€ä¸ª Hooks ä¸­å¯ä»¥å¼•ç”¨å¦å¤–çš„ Hooks</li>
<li>è§£å†³ç±»ç»„ä»¶çš„ç—›ç‚¹<ul>
<li><code>this</code> æŒ‡å‘å®¹æ˜“é”™è¯¯</li>
<li>åˆ†å‰²åœ¨ä¸åŒå£°æ˜å‘¨æœŸä¸­çš„é€»è¾‘ä½¿å¾—ä»£ç éš¾ä»¥ç†è§£å’Œç»´æŠ¤</li>
<li>ä»£ç å¤ç”¨æˆæœ¬é«˜ï¼ˆé«˜é˜¶ç»„ä»¶å®¹æ˜“ä½¿ä»£ç é‡å‰§å¢ï¼‰</li>
</ul>
</li>
</ul>
<h2 id="React-Hooks-çš„åº”ç”¨"><a href="#React-Hooks-çš„åº”ç”¨" class="headerlink" title="React Hooks çš„åº”ç”¨"></a>React Hooks çš„åº”ç”¨</h2><p>React å®˜æ–¹æä¾›äº†ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨çš„é’©å­ï¼š</p>
<ul>
<li>åŸºç¡€é’©å­ï¼š<code>useState</code>ã€<code>useEffect</code> ã€<code>useContext</code></li>
<li>é™„åŠ é’©å­ï¼š<code>useReducer</code>ã€<code>useCallback</code>ã€<code>useMemo</code>ã€<code>useRef</code>ã€<code>useImperativeHandle</code>ã€<code>useLayoutEffect</code>ã€<code>useDebugValue</code></li>
</ul>
<h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p><code>useEffect</code> é’©å­çš„ä½œç”¨æ­£å¦‚å…¶å â€”â€” ä¸ºäº†å¤„ç†æ¯”å¦‚ <strong>è®¢é˜…</strong>ã€<strong>æ•°æ®è·å–</strong>ã€<strong>DOM æ“ä½œ</strong> ç­‰ç­‰ä¸€äº›å‰¯ä½œç”¨ã€‚å®ƒçš„ä½œç”¨ä¸ <code>componentDidMount</code>, <code>componentDidUpdate</code> å’Œ <code>componentWillUnmount</code> è¿™äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç±»ä¼¼ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬è¦ç›‘å¬è¾“å…¥æ¡† <code>input</code> çš„è¾“å…¥ï¼Œç”¨ <code>useEffect</code> æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå®ç°ï¼š</p>
<pre><code class="js">function Input() {
    const [text, setText] = useState(&#39;&#39;)
    function onChange(event) {
        setText(event.target.value)
    }
    useEffect(() =&gt; {
        // ç±»ä¼¼äº componentDidMount å’Œ componentDidUpdate ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°
        const input = document.querySelector(&#39;input&#39;)
        input.addEventListener(&#39;change&#39;, onChange);
        return () =&gt; {
            // ç±»ä¼¼äº componentWillUnmount
            input.removeEventListener(&#39;change&#39;, onChange);
        }
    })
    return (
        &lt;div&gt;
            &lt;input onInput={onChange} /&gt;
            &lt;p&gt;{text}&lt;/p&gt;
        &lt;/div&gt;    
    )
}</code></pre>
<p><code>useEffect</code> é’©å­çš„ç”¨æ³•å°±æ˜¯æŠŠå‡½æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ <code>useEffect</code> ä¸­ï¼Œåœ¨è¯¥ä¼ å…¥çš„å‡½æ•°ä¸­æˆ‘ä»¬å°±å¯ä»¥åšä¸€äº› <strong>æœ‰å‰¯ä½œç”¨</strong> çš„äº‹æƒ…äº†ï¼Œæ¯”å¦‚æ“ä½œ DOM ç­‰ç­‰ã€‚</p>
<p>å¦‚æœä¼ å…¥ <code>useEffect</code> æ–¹æ³•çš„å‡½æ•°è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥ <strong>è¿”å›çš„å‡½æ•°</strong> ä¼šåœ¨ç»„ä»¶å³å°†å¸è½½æ—¶è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›æ¯”å¦‚æ¸…é™¤ timerID æˆ–è€…å–æ¶ˆä¹‹å‰å‘å¸ƒçš„è®¢é˜…ç­‰ç­‰ä¸€äº›æ¸…é™¤æ“ä½œï¼Œä¸‹é¢è¿™ä¹ˆå†™å¯èƒ½æ¯”è¾ƒç›´è§‚ï¼š</p>
<pre><code class="js">useEffect(function didUpdate() {
    // do something effects
    return function unmount() {
         // cleaning up effects
    }
})</code></pre>
<p>å½“ <code>useEffect</code> åªä¼ å…¥ä¸€ä¸ªå‚æ•°æ—¶ï¼Œ<strong>æ¯æ¬¡ <code>render</code> ä¹‹åéƒ½ä¼šæ‰§è¡Œ <code>useEffect</code> å‡½æ•°</strong>ï¼š</p>
<pre><code class="js">useEffect(() =&gt; {
    // render ä¸€æ¬¡ï¼Œæ‰§è¡Œä¸€æ¬¡
    console.log(&#39;useEffect&#39;);
})</code></pre>
<p>å½“ <code>useEffect</code> ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„æ—¶ï¼Œ<strong>åªæœ‰å½“æ•°ç»„çš„å€¼ï¼ˆä¾èµ–ï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼ å…¥å›è°ƒå‡½æ•°æ‰ä¼šæ‰§è¡Œ</strong>ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ç§æƒ…å†µï¼š</p>
<blockquote>
<p>è™½ç„¶ React çš„ diff ç®—æ³•åœ¨ DOM æ¸²æŸ“æ—¶åªä¼šæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ï¼Œä½†æ˜¯å´æ— æ³•è¯†åˆ«åˆ° <code>useEffect</code> å†…çš„å˜åŒ–ï¼Œæ‰€ä»¥éœ€è¦å¼€å‘è€…é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°å‘Šè¯‰ React ç”¨åˆ°äº†å“ªäº›å¤–éƒ¨å˜é‡ã€‚</p>
</blockquote>
<pre><code class="js">useEffect(() =&gt; {
    document.title = title
}, [title])</code></pre>
<p>å› ä¸º <code>useEffect</code> å›è°ƒå†…éƒ¨ç”¨åˆ°äº†å¤–éƒ¨çš„ <code>title</code> å˜é‡ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦ä»…å½“ <code>title</code> å€¼æ”¹å˜æ—¶æ‰æ‰§è¡Œå›è°ƒçš„è¯ï¼Œåªéœ€åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶æŠŠå†…éƒ¨æ‰€ä¾èµ–çš„å˜é‡å†™åœ¨æ•°ç»„ä¸­ï¼Œæ­¤æ—¶å¦‚æœ <code>title</code> å€¼æ”¹å˜äº†çš„è¯ï¼Œ<code>useEffect</code> å›è°ƒå†…éƒ¨å°±å¯ä»¥é€šè¿‡ä¼ å…¥çš„ä¾èµ–åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡Œå›è°ƒã€‚</p>
<p>æ‰€ä»¥å¦‚æœç»™ <code>useEffect</code> ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„çš„è¯ï¼Œ<code>useEffect</code> çš„å›è°ƒå‡½æ•°åªä¼šåœ¨é¦–æ¬¡æ¸²æŸ“ä¹‹åæ‰§è¡Œä¸€æ¬¡ï¼š</p>
<pre><code class="js">useEffect(() =&gt; {
    // åªä¼šåœ¨é¦–æ¬¡ render ä¹‹åæ‰§è¡Œä¸€æ¬¡
    console.log(&#39;useEffect&#39;)
}, [])</code></pre>
<h3 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h3><p>React ä¸­æœ‰ä¸ª <code>context</code> çš„æ¦‚å¿µï¼Œè®©æˆ‘ä»¬å¯ä»¥ <strong>è·¨ç»„ä»¶å…±äº«çŠ¶æ€ï¼Œæ— éœ€é€šè¿‡ <code>props</code> å±‚å±‚ä¼ é€’</strong>ï¼Œä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<blockquote>
<p>redux å°±æ˜¯åˆ©ç”¨ React çš„ <code>context</code> çš„ç‰¹æ€§å®ç°è·¨ç»„ä»¶æ•°æ®å…±äº«çš„ã€‚</p>
</blockquote>
<pre><code class="js">const ThemeContext = React.createContext();
function App() {
    const theme = {
        mode: &#39;dark&#39;,
        backgroundColor: &#39;#333&#39;,
    }
    return (
        &lt;ThemeContext.Provider value={theme}&gt;
            &lt;Display /&gt;
        &lt;/ThemeContext.Provider&gt;
    )
}

function Display() {
    return (
        &lt;ThemeContext.Consumer&gt;
            {({backgroundColor}) =&gt; &lt;div style={{backgroundColor}}&gt;Hello Hooks.&lt;/div&gt;}
        &lt;/ThemeContext.Consumer&gt;
    )
}</code></pre>
<p>ä¸‹é¢æ˜¯ <code>useContext</code> ç‰ˆæœ¬ï¼š</p>
<pre><code class="js">function Display() {
    const { backgroundColor } = useContext(ThemeContext);
    return (&lt;div style={{backgroundColor}}&gt;Hello Hooks.&lt;/div&gt;)
}</code></pre>
<p>åµŒå¥—ç‰ˆ <code>Consumer</code>ï¼š</p>
<pre><code class="js">function Header() {
    return (
        &lt;CurrentUser.Consumer&gt;
            {user =&gt;
                &lt;Notifications.Consumer&gt;
                    {notifications =&gt;
                        &lt;header&gt;
                            Hello {user.name}!
                            You have {notifications.length} notifications.
                        &lt;/header&gt;
                    }
                &lt;/Notifications.Consumer&gt;
            }
        &lt;/CurrentUser.Consumer&gt;
    );
}</code></pre>
<p>ç”¨ <code>useContext</code> æ‹å¹³ï¼š</p>
<pre><code class="js">function Header() {
    const user = useContext(CurrentUser)
    const notifications = useContext(Notifications)
    return (
        &lt;header&gt;
            Hello {user.name}!
            You have {notifications.length} notifications.
        &lt;/header&gt;
    )
}</code></pre>
<p>emmâ€¦ è¿™æ•ˆæœæœ‰ç‚¹ç±»ä¼¼ç”¨ <code>async</code> å’Œ <code>await</code> æ”¹é€ åœ°ç‹±å›è°ƒçš„æ„Ÿè§‰ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯ React çš„åŸºç¡€ Hooksã€‚å¯¹äºå…¶ä»–å®˜æ–¹æä¾›çš„ Hooks å¦‚æœæ„Ÿå…´è¶£å»ºè®®ç›´æ¥é˜…è¯»æ–‡æ¡£ï¼Œæœ¬æ–‡å°±ä¸ä¸€ä¸€ä»‹ç»äº†ã€‚</p>
<h3 id="ä½¿ç”¨ä¸­éœ€è¦æ³¨æ„çš„ç‚¹"><a href="#ä½¿ç”¨ä¸­éœ€è¦æ³¨æ„çš„ç‚¹" class="headerlink" title="ä½¿ç”¨ä¸­éœ€è¦æ³¨æ„çš„ç‚¹"></a>ä½¿ç”¨ä¸­éœ€è¦æ³¨æ„çš„ç‚¹</h3><p>React Hooks åœ¨å¸¦ç»™æˆ‘ä»¬æ–¹ä¾¿çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦éµå¾ªå®ƒä»¬çš„ä¸€äº›çº¦å®šï¼Œä¸ç„¶æ•ˆæœåªä¼šå˜å¾—é€‚å¾—å…¶åï¼š</p>
<ul>
<li>é¿å…åœ¨ <strong>å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­ã€åµŒå¥—å‡½æ•°</strong> ä¸­è°ƒç”¨ <strong>Hooks</strong>ï¼Œä¿è¯è°ƒç”¨é¡ºåºçš„ç¨³å®šï¼›</li>
<li>åªæœ‰ <strong>å‡½æ•°å®šä¹‰ç»„ä»¶</strong> å’Œ <strong>Hooks</strong> å¯ä»¥è°ƒç”¨ <strong>Hooks</strong>ï¼Œé¿å…åœ¨ <strong>ç±»ç»„ä»¶</strong> æˆ–è€… <strong>æ™®é€šå‡½æ•°</strong> ä¸­è°ƒç”¨ï¼›</li>
<li>ä¸èƒ½åœ¨ <code>useEffect</code> ä¸­ä½¿ç”¨ <code>useState</code>ï¼ŒReact ä¼šæŠ¥é”™æç¤ºï¼›</li>
<li>ç±»ç»„ä»¶ä¸ä¼šè¢«æ›¿æ¢æˆ–åºŸå¼ƒï¼Œä¸éœ€è¦å¼ºåˆ¶æ”¹é€ ç±»ç»„ä»¶ï¼Œä¸¤ç§æ–¹å¼èƒ½å¹¶å­˜</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Render Props çš„ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³å°±æ˜¯åœ¨ç»„ä»¶å†…éƒ¨é€šè¿‡è°ƒç”¨ <code>this.props.children()</code> ï¼ˆå½“ç„¶å¯ä»¥æ˜¯å…¶ä»–ä»»æ„å€¼æ˜¯å‡½æ•°å±æ€§åï¼‰æŠŠç»„ä»¶å†…éƒ¨çš„ä¸€äº›çŠ¶æ€ä¼ é€’å‡ºå»ï¼ˆå‚è€ƒå›è°ƒå‡½æ•°ï¼‰ï¼Œç„¶ååœ¨ç»„ä»¶å¤–éƒ¨å¯¹åº”å±æ€§çš„å‡½æ•°ä¸­é€šè¿‡å‡½æ•°çš„å‚æ•°æ¥è·å–ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ï¼Œè¿›è€Œåœ¨è¯¥å‡½æ•°ä¸­å¤„ç†ç›¸åº”çš„ UI æˆ–é€»è¾‘ã€‚è€Œ Hooks æœ‰ç‚¹åƒæ˜¯ Render Props çš„ <strong>æ‹å¹³ç‰ˆ</strong> ï¼ˆå‚è€ƒå‰é¢ <code>useContext</code>ï¼‰æ —å­ã€‚</p>
<p>ç›®å‰ä¸ºæ­¢ï¼Œä»‹ç»äº† React ä»£ç å¤ç”¨çš„ä¸‰ç§æ–¹å¼ï¼š</p>
<ul>
<li><strong>Render Props</strong></li>
<li><strong>Hooks</strong></li>
<li><strong>HOC</strong>ï¼ˆå…¬ä¼—å·åå°å›å¤ã€Œ<strong>190201</strong>ã€é˜…è¯» HOC ç›¸å…³æ–‡ç« ï¼‰</li>
</ul>
<p>é€šè¿‡å¯¹æ¯”å‘ç°ï¼Œ<strong>Hooks</strong> çš„æ–¹å¼çš„ä¼˜åŠ¿æœ€å¤§ï¼Œè§£å†³è§£å†³äº†å¦å¤–ä¸¤ç§æ–¹å¼çš„ä¸€äº›ç—›ç‚¹ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨ã€‚</p>
<p><strong>ç›¸å…³é˜…è¯»ï¼š</strong></p>
<ul>
<li><strong>React ä¸­çš„é«˜é˜¶ç»„ä»¶åŠå…¶åº”ç”¨åœºæ™¯ï¼ˆå…¬ä¼—å·åå°å›å¤ã€Œ190201ã€ï¼‰</strong></li>
<li><strong>å‰ç«¯ä¸­çš„ IoC ç†å¿µï¼ˆå…¬ä¼—å·åå°å›å¤ã€Œ190311ã€ï¼‰</strong></li>
<li><strong>(ä¸­ç¯‡)ä¸­é«˜çº§å‰ç«¯å¤§å‚é¢è¯•ç§˜ç±ï¼Œå¯’å†¬ä¸­ä¸ºæ‚¨ä¿é©¾æŠ¤èˆªï¼Œç›´é€šå¤§å‚ï¼ˆå…¬ä¼—å·åå°å›å¤ã€Œ190325ã€ï¼‰</strong></li>
</ul>

            </section>
            <footer class="article-meta">
                
            </footer>
        </article>
    </div>
</div>

<footer class="Footer text-center">
    <div class="container">
        <section class="copyright">
            <a href="https://justclear.github.io">å¤§æ¿æ —</a>
            <span>&copy; 2015 - 2019</span>
        </section>
    </div>
</footer>

    <script src="/dist/js/highlight.pack.js"></script>
    <script src="/dist/js/app.js"></script>
    <!-- <script type="text/javascript" src="https://s4.cnzz.com/z_stat.php?id=1278149431&web_id=1278149431"></script> -->
</body>
</html>

